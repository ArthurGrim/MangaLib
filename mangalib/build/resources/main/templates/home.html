<!DOCTYPE html>
<html lang="de_DE" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>MangaLib</title>
    <link
      rel="stylesheet"
      th:href="@{/css/home.css}"
      href="../static/css/home.css"
    />
  </head>
  <body>
    <header class="header">
      <nav class="header_headerInner">
        <div class="header_menuContainer">
          <ul class="main-menu">
            <li class="main-menu-homeButton"><a href="/home">Home</a></li>
            <li><a href="/Statistik">Statistik</a></li>
            <li><a href="/einkaufsliste">Einkaufsliste</a></li>
          </ul>
        </div>
        <form class="searchbar" action="/home" method="get">
          <input type="text" name="suche" placeholder="Suche..." />
          <button type="submit">
            <!-- SVG Such-Icon -->
            <img
              th:src="@{/svg/such_icon.svg}"
              alt="SVG"
              style="height: 1em; width: 1em"
            />
          </button>
        </form>
      </nav>
    </header>

    <!-- Sidebar für die Filter und Sortier Optionen -->
    <div class="sidebar">
      <div class="search-container">
        <div class="search-heading">
          <span>Filter</span>
          <form action="/resetFilters" method="get">
            <!-- Ihre Filter-Elemente hier -->

            <button
              type="submit"
              class="search-reset"
              title="Filter zurücksetzen"
            >
              <!-- SVG Reset Icon -->
              <img
                th:src="@{/svg/reset_icon.svg}"
                alt="SVG"
                style="height: 1em; width: 1em"
              />
            </button>
          </form>
        </div>
        <form action="/home" method="get">
          <div class="filter-main">
            <!-- Date Bereich -->
            <div class="filter-section">
              <label class="filter-label">
                <!-- SVG Datum Icon -->
                <img
                  th:src="@{/svg/datum_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Datum</label
              >
              <!-- Drop Down für Monat -->
              <div class="date-panel">
                <!-- Drop Down für Monat -->
                <select
                  name="monatFilter"
                  onchange="this.form.submit()"
                  class="filter-select"
                >
                  <option hidden="" value="">Monat</option>
                  <option value="" th:selected="${monatFilter == null}">
                    Alle
                  </option>
                  <option value="1" th:selected="${monatFilter == 1}">
                    Januar
                  </option>
                  <option value="2" th:selected="${monatFilter == 2}">
                    Februar
                  </option>
                  <option value="3" th:selected="${monatFilter == 3}">
                    März
                  </option>
                  <option value="4" th:selected="${monatFilter == 4}">
                    April
                  </option>
                  <option value="5" th:selected="${monatFilter == 5}">
                    Mai
                  </option>
                  <option value="6" th:selected="${monatFilter == 6}">
                    Juni
                  </option>
                  <option value="7" th:selected="${monatFilter == 7}">
                    Juli
                  </option>
                  <option value="8" th:selected="${monatFilter == 8}">
                    August
                  </option>
                  <option value="9" th:selected="${monatFilter == 9}">
                    September
                  </option>
                  <option value="10" th:selected="${monatFilter == 10}">
                    Oktober
                  </option>
                  <option value="11" th:selected="${monatFilter == 11}">
                    November
                  </option>
                  <option value="12" th:selected="${monatFilter == 12}">
                    Dezember
                  </option>
                </select>

                <!-- Drop Down für Jahr -->
                <select
                  name="jahrFilter"
                  onchange="this.form.submit()"
                  class="filter-select"
                >
                  <option hidden="" value="">Jahr</option>
                  <option value="" th:selected="${jahrFilter == null}">
                    Alle
                  </option>
                  <option
                    th:each="jahr : ${#numbers.sequence(2019, T(java.time.Year).now().getValue())}"
                    th:value="${jahr}"
                    th:text="${jahr}"
                    th:selected="${jahrFilter != null and jahr == jahrFilter}"
                  ></option>
                </select>
              </div>
            </div>
            <!-- Drop Down für Sortierung -->
            <div class="filter-section">
              <label class="filter-label" for="sort"
                ><!-- Sortierung Datum Icon -->
                <img
                  th:src="@{/svg/sortierung_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Sortierung</label
              >
              <select
                name="sortierung"
                onchange="this.form.submit()"
                class="filter-select"
              >
                <option
                  value="id"
                  th:selected="${sortierung == null || sortierung == 'id'}"
                >
                  ID
                </option>
                <option value="titel" th:selected="${sortierung == 'titel'}">
                  Titel
                </option>
              </select>
            </div>
            <!-- Drop Down für Status -->
            <div class="filter-section">
              <label class="filter-label" for="publisher">
                <!-- SVG Status Icon -->
                <img
                  th:src="@{/svg/status_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Status</label
              >
              <select
                name="statusFilter"
                onchange="this.form.submit()"
                class="filter-select"
              >
                <option value="">Alle</option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="status : ${alleStatus}"
                  th:value="${status.statusId}"
                  th:text="${status.beschreibung}"
                  th:selected="${statusFilter != null && status.statusId == statusFilter}"
                >
                  Status
                </option>
              </select>
            </div>
            <!-- Drop Down für Verlag -->
            <div class="filter-section">
              <label class="filter-label" for="publisher"
                ><!-- SVG Verlag Icon -->
                <img
                  th:src="@{/svg/verlag_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Verlag</label
              >
              <select
                name="verlagFilter"
                onchange="this.form.submit()"
                class="filter-select"
              >
                <option value="">Alle</option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="verlag : ${alleVerlage}"
                  th:value="${verlag.verlagId}"
                  th:text="${verlag.name}"
                  th:selected="${verlagFilter != null && verlag.verlagId == verlagFilter}"
                >
                  Verlag
                </option>
              </select>
            </div>
            <!-- Drop Down für Typ -->
            <div class="filter-section">
              <label class="filter-label" for="sourceType"
                ><!-- SVG Typ Icon -->
                <img
                  th:src="@{/svg/typ_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Typ</label
              >
              <select
                name="typFilter"
                onchange="this.form.submit()"
                class="filter-select"
              >
                <option value="">Alle</option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="typ : ${alleTypen}"
                  th:value="${typ.typId}"
                  th:text="${typ.bezeichnung}"
                  th:selected="${typFilter != null && typ.typId == typFilter}"
                >
                  Typ
                </option>
              </select>
            </div>
            <!-- Drop Down für Format -->
            <div class="filter-section">
              <label class="filter-label" for="format"
                ><!-- SVG Format Icon -->
                <img
                  th:src="@{/svg/format_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Format</label
              >
              <select
                name="formatFilter"
                onchange="this.form.submit()"
                class="filter-select"
              >
                <option value="">Alle</option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="format : ${alleFormate}"
                  th:value="${format.formatId}"
                  th:text="${format.bezeichnung}"
                  th:selected="${formatFilter != null && format.formatId == formatFilter}"
                >
                  Format
                </option>
              </select>
            </div>
            <!-- Drop Down für Vergriffen -->
            <div class="filter-section">
              <label class="filter-label" for="vergriffen"
                ><!-- SVG Vergriffen Icon -->
                <img
                  th:src="@{/svg/vergriffen_icon.svg}"
                  alt="SVG"
                  style="height: 1em; width: 1em"
                />
                Vergriffen</label
              >
              <select
                name="vergriffenFilter"
                onchange="this.form.submit()"
                class="filter-select"
              >
                <option value="" th:selected="${vergriffenFilter == null}">
                  Alle
                </option>
                <option
                  value="true"
                  th:selected="${vergriffenFilter == 'true'}"
                >
                  Ja
                </option>
                <option
                  value="false"
                  th:selected="${vergriffenFilter == 'false'}"
                >
                  Nein
                </option>
              </select>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Button um direkt nach oben zu scrollen -->
    <div class="scrollToTopButton">
      <button id="scrollToTopButton" onclick="scrollToTop()">
        <!-- SVG Up-Icon -->
        <img th:src="@{/svg/up_icon.svg}" alt="SVG" />
      </button>
    </div>

    <!-- Bereich um alle MangaReihe Opjekte anzeigen zu lassen -->
    <div class="manga-reihen-container">
      <div class="manga-reihen-header">
        <div class="manga-reihe-bild">Bild</div>
        <div class="manga-reihe-status">Status</div>
        <div class="manga-reihe-verlag">Verlag</div>
        <div class="manga-reihe-typ">Typ</div>
        <div class="manga-reihe-format">Format</div>
        <div class="manga-reihe-titel">Titel</div>
        <div class="manga-reihe-baende">Bände</div>
        <div class="manga-reihe-preis">Preis</div>
        <div class="manga-reihe-gesamtpreis">Gesamtpreis</div>
        <!-- Verlinkung auf Manga Passion Übersicht -->
        <a
          class="MP-link"
          href="https://www.manga-passion.de/manga"
          target="_blank"
          rel="noopener noreferrer"
        >
        <!-- PNG Manga Passion Logo -->
          <img
            th:src="@{/svg/MangaPassion_logo.png}"
            alt="SVG"
            style="height: 100%; width: 100%"
          />
        </a>

        <!-- Verlinkung auf die AniList Start Page -->
        <a
          class="AL-link"
          href="https://anilist.co/home"
          target="_blank"
          rel="noopener noreferrer"
        >
        <!-- PNG AniList Logo -->
          <img
            th:src="@{/svg/AniList_logo.png}"
            alt="AniList Logo"
            style="height: 100%; width: 100%"
          />
        </a>

        <!-- Button zum Hinzufügen neuer Reihen -->
        <button
          type="button"
          id="addButton"
          class="add-button"
          title="Hinzufügen"
        >
          <!-- SVG Add Icon -->
          <img
            th:src="@{/svg/add_icon.svg}"
            alt="SVG"
            style="height: 100%; width: 100%"
          />
        </button>
      </div>
      <!-- Hier kommen die einzelnen MangaReihen -->
      <div th:each="mangaReihe : ${alleMangaReihen}" class="manga-reihe-panel">
        <div class="cover-bild">
          <th:block th:with="coverUrl=${coverUrlsMap[mangaReihe.id]}">
            <!-- Prüfen, ob coverUrl nicht null ist -->
            <img th:if="${coverUrl != null}" th:src="${coverUrl}" />
            <!-- Optional: Etwas anzeigen, wenn coverUrl null ist -->
            <div th:if="${coverUrl == null}">
              <img
                th:src="@{/svg/filler_img2.png}"
                alt="Filler Image"
                style="width: 75%; height: auto"
              />
            </div>
          </th:block>
        </div>
        <div class="status">
          <p
            th:text="${mangaReihe.status?.beschreibung ?: 'Status nicht verfügbar'}"
          >
            Status
          </p>
        </div>
        <div class="verlag">
          <p th:text="${mangaReihe.verlag?.name ?: 'Verlag nicht verfügbar'}">
            Verlag
          </p>
        </div>
        <div class="typ">
          <p th:text="${mangaReihe.typ?.bezeichnung ?: 'Typ nicht verfügbar'}">
            Typ
          </p>
        </div>
        <div class="format">
          <p
            th:text="${mangaReihe.format?.bezeichnung ?: 'Format nicht verfügbar'}"
          >
            Format
          </p>
        </div>
        <div class="titel">
          <p th:text="${mangaReihe.titel ?: 'Titel nicht verfügbar'}">Titel</p>
        </div>
        <div class="baende">
          <p th:text="${mangaReihe.anzahlBaende ?: 'Bände nicht verfügbar'}">
            Bände
          </p>
        </div>
        <div class="preis">
          <p
            th:text="${mangaReihe.preisProBandString ?: 'Preis nicht verfügbar'}"
          >
            Preis
          </p>
        </div>
        <div class="gesamtpreis">
          <p
            th:text="${mangaReihe.gesamtpreisString ?: 'Gesamtpreis nicht verfügbar'}"
          >
            Gesamtpreis
          </p>
        </div>
        <!-- Button welcher einen auf Manga Passion weiterleitet -->
        <button
          type="button"
          class="MP-button"
          title="Manga Passion"
          th:data-id="${mangaReihe.id}"
        >
          <!-- SVG Manga Passion Icon -->
          <img
            th:src="@{/svg/MangaPassion_logo.png}"
            alt="SVG"
            style="height: 19px; width: 19px"
          />
        </button>

        <!-- Button welcher einen auf AniList weiterleitet -->
        <button
          type="button"
          class="AL-button"
          title="AniList"
          th:data-id="${mangaReihe.id}"
        >
          <!-- SVG AniList Icon -->
          <img
            th:src="@{/svg/AniList_logo.png}"
            alt="SVG"
            style="height: 19px; width: 19px"
          />
        </button>

        <!-- Button um die Reihe zu bearbeiten -->
        <button
          type="button"
          class="edit-button"
          title="Edit"
          th:data-id="${mangaReihe.id}"
        >
          <!-- SVG Edit Icon -->
          <img
            th:src="@{/svg/edit_icon.svg}"
            alt="SVG"
            style="height: 17px; width: 17px"
          />
        </button>
      </div>
    </div>

    <!-- Pop-Up Fenster um neue Reihen hinzuzufügen -->
    <div id="popupContainer" class="popup-container">
      <div class="popup">
        <form action="/addMangaReihe" method="post">
          <div class="loading-label" style="display: none">Lädt...</div>
          <!-- Erste Reihe -->
          <div class="form-row form-row-1">
            <div class="input-group">
              <label for="id">ID</label>
              <label id="id" class="id-label" th:text="${nextId}"></label>
            </div>
            <div class="input-group">
              <label for="manga_index">Manga Index</label>
              <input type="text" id="manga_index" name="manga_index" />
            </div>
            <div class="spacer"></div>
            <button type="button" class="save-button">Save</button>
          </div>

          <!-- Zweite Reihe -->
          <div class="form-row form-row-2">
            <div class="input-group">
              <label for="status">Status</label>
              <select id="status" name="status">
                <option value=""></option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="status : ${alleStatus}"
                  th:value="${status.statusId}"
                  th:text="${status.beschreibung}"
                ></option>
              </select>
            </div>
            <div class="input-group">
              <label for="verlag">Verlag</label>
              <select id="verlag" name="verlag">
                <option value=""></option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="verlag : ${alleVerlage}"
                  th:value="${verlag.verlagId}"
                  th:text="${verlag.name}"
                ></option>
              </select>
            </div>
            <div class="input-group">
              <label for="typ">Typ</label>
              <select id="typ" name="typ">
                <option value=""></option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="typ : ${alleTypen}"
                  th:value="${typ.typId}"
                  th:text="${typ.bezeichnung}"
                ></option>
              </select>
            </div>
          </div>

          <!-- Dritte Reihe -->
          <div class="form-row form-row-3">
            <div class="input-group">
              <label for="titel">Titel</label>
              <input type="text" id="titel" name="titel" />
            </div>
            <div class="input-group">
              <label for="format">Format</label>
              <select id="format" name="format">
                <option value=""></option>
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="format : ${alleFormate}"
                  th:value="${format.formatId}"
                  th:text="${format.bezeichnung}"
                ></option>
              </select>
            </div>
          </div>

          <!-- Vierte Reihe -->
          <div class="form-row form-row-4">
            <div class="input-group">
              <label for="anzahl_baende">Anzahl Bände</label>
              <input type="number" id="anzahl_baende" name="anzahl_baende" />
              <!-- Buttons zum Erhöhen/Vermindern -->
            </div>
            <div class="input-group">
              <label for="preis_pro_band">Preis pro Band in €</label>
              <input type="text" id="preis_pro_band" name="preis_pro_band" />
            </div>
            <div class="input-group">
              <label for="anilist_url">AniList URL</label>
              <input type="text" id="anilist_url" name="anilist_url" />
            </div>
          </div>

          <!-- Fünfte Reihe -->
          <div class="form-row form-row-5">
            <div class="checkbox-group">
              <label for="istvergriffen">Vergriffen</label>
              <input type="checkbox" id="istvergriffen" name="istvergriffen" />
            </div>
            <div class="checkbox-group">
              <label for="istebaypreis">eBay-Preis</label>
              <input type="checkbox" id="istebaypreis" name="istebaypreis" />
            </div>
            <div class="checkbox-group">
              <label for="istsammelband">Sammelband</label>
              <input type="checkbox" id="istsammelband" name="istsammelband" />
            </div>
            <div class="input-group">
              <label for="gesamtpreis_aenderung">Änderung Preis in €</label>
              <input
                type="text"
                id="gesamtpreis_aenderung"
                name="gesamtpreis_aenderung"
              />
            </div>
            <div class="input-group">
              <label for="sammelband_typ">Sammelband Typ</label>
              <select id="sammelband_typ" name="sammelband_typ">
                <!-- Die Optionen über den Controler abrufen -->
                <option
                  th:each="sammelband : ${alleSammelbaende}"
                  th:value="${sammelband.id}"
                  th:text="${sammelband.typ}"
                ></option>
              </select>
            </div>
          </div>

          <!-- Letzte Reihe -->
          <div class="form-row form-row-6">
            <button type="button" class="mp-autofill-button">
              MP Autofill
            </button>
            <button type="button" class="cancel-button">Cancel</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Pop-Up Fenster um MangaReihe zu bearbeiten -->
    <div id="editPopupContainer" class="popup-container">
      <div class="popup-edit">
        <form action="/editMangaReihe" method="post">
          <div class="popup-header">
            <div class="cover-bild-edit">
              <img id="editCoverImage" src="" alt="Cover Bild" />
            </div>
            <label id="editTitleLabel" class="title-label">Titel</label>
            <button type="button" class="save-button-edit">Save</button>
          </div>
          <div class="popup-body">
            <!-- Formular zum Bearbeiten -->

            <div class="loading-label-edit" style="display: none">Lädt...</div>
            <!-- Erste Reihe -->
            <div class="form-row form-row-1">
              <div class="input-group">
                <label for="id-edit">ID</label>
                <label id="id-edit" class="id-label"></label>
              </div>
              <div class="input-group">
                <label for="manga_index-edit">Manga Index</label>
                <input type="text" id="manga_index-edit" name="manga_index" />
              </div>
              <div class="spacer"></div>
            </div>

            <!-- Zweite Reihe -->
            <div class="form-row form-row-2">
              <div class="input-group">
                <label for="status-edit">Status</label>
                <select id="status-edit" name="status">
                  <option value=""></option>
                  <!-- Die Optionen über den Controler abrufen -->
                  <option
                    th:each="status : ${alleStatus}"
                    th:value="${status.statusId}"
                    th:text="${status.beschreibung}"
                  ></option>
                </select>
              </div>
              <div class="input-group">
                <label for="verlag-edit">Verlag</label>
                <select id="verlag-edit" name="verlag">
                  <option value=""></option>
                  <!-- Die Optionen über den Controler abrufen -->
                  <option
                    th:each="verlag : ${alleVerlage}"
                    th:value="${verlag.verlagId}"
                    th:text="${verlag.name}"
                  ></option>
                </select>
              </div>
              <div class="input-group">
                <label for="typ-edit">Typ</label>
                <select id="typ-edit" name="typ">
                  <option value=""></option>
                  <!-- Die Optionen über den Controler abrufen -->
                  <option
                    th:each="typ : ${alleTypen}"
                    th:value="${typ.typId}"
                    th:text="${typ.bezeichnung}"
                  ></option>
                </select>
              </div>
            </div>

            <!-- Dritte Reihe -->
            <div class="form-row form-row-3">
              <div class="input-group">
                <label for="titel-edit">Titel</label>
                <input type="text" id="titel-edit" name="titel" />
              </div>
              <div class="input-group">
                <label for="format-edit">Format</label>
                <select id="format-edit" name="format">
                  <option value=""></option>
                  <!-- Die Optionen über den Controler abrufen -->
                  <option
                    th:each="format : ${alleFormate}"
                    th:value="${format.formatId}"
                    th:text="${format.bezeichnung}"
                  ></option>
                </select>
              </div>
            </div>

            <!-- Vierte Reihe -->
            <div class="form-row form-row-4">
              <div class="input-group">
                <label for="anzahl_baende-edit">Anzahl Bände</label>
                <input
                  type="number"
                  id="anzahl_baende-edit"
                  name="anzahl_baende"
                />
                <!-- Buttons zum Erhöhen/Vermindern -->
              </div>
              <div class="input-group">
                <label for="preis_pro_band-edit">Preis pro Band in €</label>
                <input
                  type="text"
                  id="preis_pro_band-edit"
                  name="preis_pro_band"
                />
              </div>
              <div class="input-group">
                <label for="anilist_url-edit">AniList URL</label>
                <input type="text" id="anilist_url-edit" name="anilist_url" />
              </div>
              <div class="input-group">
                <label for="coverUrl-edit">Cover Url</label>
                <input type="text" id="coverUrl-edit" name="coverUrl" />
              </div>
            </div>

            <!-- Fünfte Reihe -->
            <div class="form-row form-row-5">
              <div class="checkbox-group">
                <label for="istvergriffen-edit">Vergriffen</label>
                <input
                  type="checkbox"
                  id="istvergriffen-edit"
                  name="istvergriffen"
                />
              </div>
              <div class="checkbox-group">
                <label for="istebaypreis-edit">eBay-Preis</label>
                <input
                  type="checkbox"
                  id="istebaypreis-edit"
                  name="istebaypreis"
                />
              </div>
              <div class="checkbox-group">
                <label for="istsammelband-edit">Sammelband</label>
                <input
                  type="checkbox"
                  id="istsammelband-edit"
                  name="istsammelband"
                />
              </div>
              <div class="input-group">
                <label for="gesamtpreis_aenderung-edit"
                  >Änderung Preis in €</label
                >
                <input
                  type="text"
                  id="gesamtpreis_aenderung-edit"
                  name="gesamtpreis_aenderung"
                />
              </div>
              <div class="input-group">
                <label for="sammelband_typ-edit">Sammelband Typ</label>
                <select id="sammelband_typ-edit" name="sammelband_typ">
                  <!-- Die Optionen über den Controler abrufen -->
                  <option
                    th:each="sammelband : ${alleSammelbaende}"
                    th:value="${sammelband.id}"
                    th:text="${sammelband.typ}"
                  ></option>
                </select>
              </div>
            </div>

            <!-- Letzte Reihe -->
            <div class="form-row form-row-6">
              <button type="button" class="mp-autofill-button-edit">
                MP Autofill
              </button>
              <button type="button" class="cancel-button-edit">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <script src="/js/scrollToTop.js"></script>
    <script src="/js/popup_add_reihe.js"></script>
    <script src="/js/popup_edit_reihe.js"></script>
  </body>
</html>
